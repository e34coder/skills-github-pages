<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Clock, Date, and Prayer Times with Medicine Reminder</title>
  <link rel="stylesheet" href="i2/styles.css">
</head>

<body>

  <div class="container">
    <div class="day-time-box">
      <div class="day-date-container">
        <div class="day" id="day"></div>
        <div class="date" id="date"></div>
      </div>
      <div class="time" id="clock"></div>
    </div>

    <div class="prayer-info">
      <div class="prayer-row">
        <div class="prayer-section">
          <div class="prayer-label">Current</div>
          <div class="prayer-name" id="current-prayer-name"></div>
          <div class="prayer-time" id="current-prayer-time"></div>
        </div>
        
        <div class="separator">||</div>
        
        <div class="prayer-section">
          <div class="prayer-label">Next</div>
          <div class="prayer-name" id="next-prayer-name"></div>
          <div class="prayer-time" id="next-prayer-time"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ðŸ”Š Sound -->
  <audio id="reminderSound" preload="auto">
    <source src="https://e34coder.github.io/skills-github-pages/sounds/iphone/point-smooth-beep-230573.mp3" type="audio/mpeg">
  </audio>

  <!-- Test Audio Button -->
  <button id="testAudioBtn" title="Test Audio Reminder">ðŸ”Š</button>

  <!-- Script files -->
  <script src="i2/reminder.js"></script>
  <script src="i2/prayer.js"></script>
  <script src="i2/clock.js"></script>
  <script src="i2/audiotest.js"></script>
  
  <script>
    // ------------------------ INITIALIZATION ------------------------
    
    // Initialize everything
    document.addEventListener('DOMContentLoaded', async () => {
      console.log('Initializing app...');
      
      // Initialize test audio button
      initTestAudioButton();
      
      // Cache audio file on load
      await cacheAudioFile();
      
      // Initialize location and prayer times
      getLocation();
      
      // Fetch prayer times initially and then every hour
      setInterval(fetchPrayerTimes, 3600000);
      
      // Preload the audio
      const audio = document.getElementById("reminderSound");
      audio.load();
      
      console.log('App initialized');
    });

  </script>

</body>

</html>
